<html>

<head>
  <title>New message ajax</title>
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.1.0/build/pure-min.css"
    integrity="sha384-yHIFVG6ClnONEA5yB5DJXfW2/KC173DIQrYoZMEtBvGzmf0PKiGyNEqe9N6BNDBH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.1.0/build/grids-responsive-min.css">
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
</head>
<script>
  window.onload = (event) => {

    var sendButton = document.getElementById("myButton");
    sendButton.addEventListener("click", function () {

      var username = document.getElementById("username").value;
      var country = document.getElementById("country").value;
      var message = document.getElementById("message").value;

      console.log(username);

      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {

          document.getElementById("status").innerHTML = this.responseText;
          console.log(this.responseText);

        };
      };
      xmlhttp.open("POST", "/savemessage", true);

      xmlhttp.setRequestHeader(
        "Content-type",
        "application/x-www-form-urlencoded"
      );
      xmlhttp.send("username=" + username + "&country=" + country + "&message=" + message);

    });
  };
</script>

<body style="margin-top:60px;margin-left:25%;margin-right: 25%;">
  <div class="header">
    <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
      <a class="pure-menu-heading">Guestbook</a>

      <ul class="pure-menu-list">
        <li class="pure-menu-item pure-menu-selected"><a href="index.html" class="pure-menu-link">Home</a></li>
        <li class="pure-menu-item"><a href="newmessage.html" class="pure-menu-link">New entry</a></li>
        <li class="pure-menu-item"><a href="guestbooktable.html" class="pure-menu-link">Guestbook</a></li>
        <li class="pure-menu-item"><a href="ajax.html" class="pure-menu-link">Ajax entry</a></li>
      </ul>
    </div>
  </div>
  <div>


    <h3>New ajax entry </h3>

    <form method="POST" action="/savemessage" style="padding:20px;background-color: rgb(231, 231, 231);"
      class="border border-secondary rounded">

      <div class="mb-3">
        <label class="form-label">Username:</label>

        <input type="text" class="form-control border border-secondary rounded" id="username" name="username"
          required />
      </div>
      <div class="mb-3">
        <label class="form-label">Country:</label>

        <input type="text" class="form-control border border-secondary rounded" id="country" name="country" required />
      </div>
      <div class="mb-3">
        <label class="form-label">Message:</label>

        <input type="text" class="form-control border border-secondary rounded" id="message" name="message" required />
      </div>

      <button type="button" id="myButton" class="btn btn-primary" style="width: auto;">
        Submit
      </button>
      <div id="status" class="form-group"></div>
    </form>
  </div>


</body>

</html>